shiny::runApp('cc-mvs')
runApp('cc-mvs')
dati<- read_sheet(id$id, col_types = "cidddd", sheet = 1)
dati
dfx<-df %>%
#filter(anno==input$anno) %>%
rowwise()
df <- dati
df$data<-dmy(df$data)
df<-mutate(df,anno=year(data))
df$anno<-as.Date((paste(df$anno,"-01","-01",sep="")))
df$anno<-substring(as.factor(df$anno),1,4)
dfx<-df %>%
filter(anno==input$anno) %>%
rowwise()
dfx<-df %>%
rowwise()
dfx
df
dfx<-df %>%
mutate(X = DO_Cn) %>%
data.frame() %>%
mutate(R = abs(X-lag(X)))
dfx
meanx<-mean(dfx$X,na.rm=T)
xul<-mean(dfx$X, na.rm = T)+2.66*mean(dfx$R, na.rm=T)
xil<-mean(dfx$X, na.rm = T)-2.66*mean(dfx$R, na.rm=T)
xends<-max(dfx$piastra, na.rm=TRUE)
ggplotly(ggplot(dfx, aes(x = piastra, y = X)) + geom_point(size=0.3)+geom_line(linetype=1, size=0.2)+
geom_segment(aes(x=piastra,xend=xends,y=meanx,yend=meanx), color='blue', linetype=1,size=0.2)+
geom_segment(aes(x=piastra,xend=xends,y=xul,yend=xul), color='blue', linetype=1,size=0.2)+
geom_segment(aes(x=piastra,xend=xends,y=xil,yend=xil), color='blue', linetype=1,size=0.2)+
geom_text(aes(x = max(piastra, na.rm=TRUE)+10, y = meanx, label = paste("LC=", round(meanx,3))),size=3)+
geom_text(aes(x = max(piastra, na.rm=TRUE)+10, y = xul, label = paste("LSup=", round(xul,3))), size=3)+
geom_text(aes(x = max(piastra, na.rm=TRUE)+10, y = xil, label = paste("LInf=", round(xil,3))),size=3))
runApp('cc-mvs')
runApp('D:/Dati/vito.tranquillo/Desktop/GitProjects/C_Charts/cc-mvs')
runApp('cc-mvs')
runApp('cc-mvs')
runApp('cc-mvs')
runApp('cc-mvs')
mean (c(1,2,3))
gs4_browse(id)
runApp('cc-mvs')
runApp('cc-mvs')
runApp('cc-mvs')
runApp('cc-mvs')
runApp('cc-mvs')
runApp('cc-mvs')
runApp('cc-mvs')
runApp('cc-mvs')
shiny::runApp('cc-mvs')
runApp('cc-mvs')
runApp('cc-mvs')
runApp('cc-mvs')
dati<- read_sheet(id$id, col_types = "cidddd", sheet = 1)
View(dati)
library("shiny")
library("datasets")
library("tidyverse")
library("plotly")
library("googledrive")
library("googlesheets4")
library("lubridate")
library("shinycssloaders")
library("shinyjs")
#IL CODICE SEGUENTE SI FA SOLO LA PRIMA VOLTA CHE SI ACCEDE AL DRIVE DI GOOGLE
options(gargle_oauth_cache = ".secrets")
gargle::gargle_oauth_cache()
drive_auth()
list.files(".secrets/")
###il seguente codice va fatto girare sempre####________________________________
options(
gargle_oauth_cache = ".secrets",
gargle_oauth_email = TRUE
)
drive_auth()
gs4_auth(token = drive_token())
mydrive<-drive_find(type = "spreadsheet")
mydrive
ccsiero <- filter(mydrive, mydrive$name == "bgccsierologia")
View(ccsiero)
ccmicro <- filter(mydrive, mydrive$name == "ccmicrobiologia")
View(mydrive)
read_sheet(ccsiero$id, col_types = "cidddd", sheet = "Brucellosi")
read_sheet(ccsiero$id, sheet = "Brucellosi")
read_sheet(ccsiero$id, col_types = "d", sheet = "Brucellosi")
read_sheet(ccsiero$id, col_types = "c", sheet = "Brucellosi")
read_sheet(ccsiero$id, col_types = "cdcdd", sheet = "Brucellosi")
read_sheet(ccsiero$id, col_types = "cdccdd", sheet = "Brucellosi")
read_sheet(ccsiero$id, col_types = "cdccddcc", sheet = "Brucellosi")
sid <- filter(mydrive, mydrive$name == "bgccsierologia")
mid <- filter(mydrive, mydrive$name == "ccmicrobiologia")
ccsiero <- read_sheet(sid$id, col_types = "cdccddcc", sheet = "Brucellosi")
runApp('SVILUPPO/cc-bergamo')
runApp('D:/Dati/vito.tranquillo/Desktop/GitProjects/C_Charts/SVILUPPO/cc-bergamo')
runApp('D:/Dati/vito.tranquillo/Desktop/GitProjects/C_Charts/SVILUPPO/cc-bergamo')
runApp('SVILUPPO/cc-bergamo')
runApp('SVILUPPO/cc-bergamo')
runApp('SVILUPPO/cc-bergamo')
options(
gargle_oauth_cache = ".secrets",
gargle_oauth_email = TRUE
)
drive_auth()
gs4_auth(token = drive_token())
mydrive <- drive_find(type = "spreadsheet")
sid <- filter(mydrive, mydrive$name == "bgccsierologia")
dati <- read_sheet(sid$id, col_types = "cdccddc",  sheet = "Neospora")
dati
df <-  dati  %>%
mutate(data = dmy(data),
anno = substring(as.factor(as.Date(year(data),"-01","-01",sep="")), 1,4),
X=mean(c(ct1,ct2)),
R = abs(X-lag(X)))
df
df <-  dati  %>%
mutate(data = dmy(data),
anno = substring(as.factor(as.Date(year(data),"-01","-01",sep="")), 1,4),
X=mean(ct1,ct2),
R = abs(X-lag(X)))
mean(dati$ct1, dati$ct2
)
dati
dati <- read_sheet(sid$id, col_types = "cdccddc",  sheet = "Neospora")
dati
dmy(dati$data)
data <-dmy(dati$data)
data
year(data)
anno = substring(as.factor(as.Date(year(data),"-01","-01",sep="")), 1,4)
anno
data
as.factor(as.Date(year(data),"-01","-01",sep="")
)
as.factor(year(data),"-01","-01",sep="")
)
year(data)
dati  %>%
mutate(data = dmy(data),
anno = year(data),
X=mean(ct1,ct2),
R = abs(X-lag(X)))
dati  %>%
mutate(data = dmy(data),
anno = year(data),
X=mean(c(ct1,ct2)),
R = abs(X-lag(X)))
mean(dati$ct1, dati$ct2)
meadn(dati$ct1)
mean(dati$ct1)
dati  %>%
mutate(data = dmy(data),
anno = year(data))
rowwise() %>%
mutate( X=mean(c(ct1,ct2)),
R = abs(X-lag(X)))
library("shiny")
library("datasets")
library("tidyverse")
library("plotly")
library("googledrive")
library("googlesheets4")
library("lubridate")
library("shinycssloaders")
library("shinyjs")
options(
gargle_oauth_cache = ".secrets",
gargle_oauth_email = TRUE
)
drive_auth()
gs4_auth(token = drive_token())
mydrive <- drive_find(type = "spreadsheet")
sid <- filter(mydrive, mydrive$name == "bgccsierologia")
dati <- read_sheet(sid$id, col_types = "cdccddc",  sheet = "Neospora")
View(dati)
glimpse(dati)
dati  %>%  rowwise()
df <-  dati  %>%  rowwise() %>%
mutate(X = mean(c(ct1,ct2)))
df
df <-  dati  %>%  rowwise() %>%
mutate(X = mean(c(ct1,ct2)),
data = dmy(data),
anno = year(data))
df
df <-  dati  %>%  rowwise() %>%
mutate(X = mean(c(ct1,ct2)),
data = dmy(data),
anno = year(data),
R = abs(X-lag(X)))
df
df <-  dati  %>%
mutate(X = mean(c(ct1,ct2)),
data = dmy(data),
anno = year(data),
R = abs(X-lag(X)))
df
df <-  dati  %>%  rowwise() %>%
mutate(X = mean(c(ct1,ct2)),
data = dmy(data),
anno = year(data)) %>%
data.frame() %>%
mutate(R = abs(X-lag(X)))
df
meanx<-mean(df$X,na.rm=T)
xul<-mean(df$X, na.rm = T)+2.66*mean(df()$R, na.rm=T)
xul<-mean(df$X, na.rm = T)+2.66*mean(df$R, na.rm=T)
xil<-mean(df$X, na.rm = T)-2.66*mean(df$R, na.rm=T)
xends<-max(df$X,piastra, na.rm=TRUE)
xends<-max(df$X,df$piastra, na.rm=TRUE)
ggplotly(ggplot(df, aes(x = piastra, y = X)) + geom_point(size=0.3)+geom_line(linetype=1, size=0.2)+
geom_segment(aes(x=piastra,xend=xends,y=meanx,yend=meanx), color='blue', linetype=1,size=0.2)+
geom_segment(aes(x=piastra,xend=xends,y=xul,yend=xul), color='blue', linetype=1,size=0.2)+
geom_segment(aes(x=piastra,xend=xends,y=xil,yend=xil), color='blue', linetype=1,size=0.2)+
geom_text(aes(x = max(piastra, na.rm=TRUE)+10, y = meanx, label = paste("LC=", round(meanx,3))),size=3)+
geom_text(aes(x = max(piastra, na.rm=TRUE)+10, y = xul, label = paste("LSup=", round(xul,3))), size=3)+
geom_text(aes(x = max(piastra, na.rm=TRUE)+10, y = xil, label = paste("LInf=", round(xil,3))),size=3))
runApp('SVILUPPO/cc-bergamo')
runApp('D:/Dati/vito.tranquillo/Desktop/GitProjects/C_Charts/SVILUPPO/cc-bergamo')
runApp('SVILUPPO/cc-bergamo')
runApp('SVILUPPO/cc-bergamo')
runApp('SVILUPPO/cc-bergamo')
runApp('D:/Dati/vito.tranquillo/Desktop/GitProjects/C_Charts/SVILUPPO/cc-bergamo')
runApp('SVILUPPO/cc-bergamo')
runApp('SVILUPPO/cc-bergamo')
runApp('SVILUPPO/cc-bergamo')
runApp('cc-mvs')
